{
  "version": 3,
  "file": "fetch.js",
  "sourceRoot": "..\\..",
  "sources": [
    "src\\components\\fetch.coffee"
  ],
  "names": [],
  "mappings": ";AAAA;EAAA,MAAM,CAAC,OAAP,GAAiB,QAAA,CAAC,GAAD,CAAA;IACf,GAAG,CAAC,SAAJ,GAAgB;IAChB,GAAG,CAAC,UAAJ,GAAiB;WACjB,QAAA,CAAC,OAAD,CAAA;aACE,IAAI,OAAJ,CAAY,MAAA,QAAA,CAAC,OAAD,EAAU,MAAV,CAAA;AAChB,YAAA,CAAA,EAAA,EAAA,EAAA,CAAA,EAAA,CAAA,EAAA,GAAA,EAAA,GAAA,EAAA,IAAA,EAAA,WAAA,EAAA,GAAA,EAAA,IAAA,EAAA,IAAA,EAAA,GAAA,EAAA,WAAA,EAAA,QAAA,EAAA;AAAM;AACE;UAAA,KAAA,qCAAA;;YAAA,MAAM,EAAA,CAAG,OAAH;UAAN;UACA,IAAG,OAAO,CAAC,SAAX;AACE;YAAA,KAAA,wCAAA;;cAAA,MAAM,EAAA,CAAG,OAAH;YAAN,CADF;WAFF;SAIA,aAAA;UAAM;AACJ,iBAAO,MAAA,CAAO,CAAP,EADT;;QAEA,OAAO,CAAC,MAAR,GAAiB,OAAO,CAAC,MAAR,IAAkB;QACnC,GAAA,GAAM,IAAI,cAAJ,CAAA;QACN,IAAG,OAAO,CAAC,OAAX;AACE;UAAA,KAAA,WAAA;;YAAA,GAAG,CAAC,gBAAJ,CAAqB,GAArB,EAA0B,KAA1B;UAAA,CADF;;QAEA,GAAG,CAAC,gBAAJ,CAAqB,cAArB,EAAqC,kCAArC;QACA,IAAG,WAAA,GAAc,GAAG,CAAC,WAAJ,CAAgB,OAAhB,CAAjB;UACE,IAAG,QAAA,GAAW,CAAA,MAAM,WAAW,CAAC,YAAZ,CAAyB,GAAzB,CAAN,CAAd;AACE,mBAAO,WAAA,CAAY,QAAZ,EADT;WADF;;QAGA,WAAA,GAAc,MAAA,QAAA,CAAC,QAAD,CAAA;AACpB,cAAA,CAAA,EAAA,CAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,EAAA;AAAQ;AACE;YAAA,KAAA,wCAAA;;cAAA,MAAM,EAAA,CAAG,QAAH;YAAN;YACA,IAAG,OAAO,CAAC,UAAX;AACE;cAAA,KAAA,wCAAA;;gBAAA,MAAM,EAAA,CAAG,QAAH;cAAN,CADF;aAFF;WAIA,aAAA;YAAM;AACJ,mBAAO,MAAA,CAAO,CAAP,EADT;;iBAEA,OAAA,CAAQ,QAAR;QAPY;QAQd,GAAG,CAAC,IAAJ,CAAS,OAAO,CAAC,GAAjB,EAAsB,OAAO,CAAC,MAA9B,EAAsC,IAAtC;QACA,GAAG,CAAC,kBAAJ,GAAyB,QAAA,CAAA,CAAA;UACvB,IAAiB,IAAC,CAAC,UAAF,KAAgB,CAAjC;mBAAA,WAAA,CAAY,IAAZ,EAAA;;QADuB;eAGzB,GAAG,CAAC,IAAJ,CAAS,OAAO,CAAC,IAAjB;MA3BU,CAAZ;IADF;EAHe;AAAjB",
  "sourcesContent": [
    "module.exports = (app) ->\r\n  app.$preFetch = []\r\n  app.$postFetch = []\r\n  (options) ->\r\n    new Promise (resolve, reject) ->\r\n      try\r\n        await fn options for fn in app.$preFetch\r\n        if options.$preFetch\r\n          await fn options for fn in options.$preFetch\r\n      catch e\r\n        return reject e\r\n      options.method = options.method or 'GET'\r\n      req = new XMLHttpRequest()\r\n      if options.headers\r\n        req.setRequestHeader key, value for key, value of options.headers\r\n      req.setRequestHeader 'Content-Type', 'application/x-www-form-urlencode'\r\n      if mockService = app.$getSerivce('mocks')\r\n        if response = await mockService.$getResponse req\r\n          return resolveData response\r\n      resolveData = (response) ->\r\n        try\r\n          await fn response for fn in app.$postFetch\r\n          if options.$postFetch\r\n            await fn response for fn in options.$postFetch\r\n        catch e\r\n          return reject e\r\n        resolve response\r\n      req.open options.url, options.method, true\r\n      req.onreadystatechange = ->\r\n        resolveData @ if @.readyState is 4\r\n\r\n      req.send options.data\r\n"
  ]
}